(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function t(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(n){if(n.ep)return;n.ep=!0;const l=t(n);fetch(n.href,l)}})();const i={COUNTER_TICK_MS:10,COUNTER_FLUCTUATION_PCT:.2,COUNTER_BASE_STEP:1,COUNTER_COST:100,UI_UPDATE_MS:100,CHART_INTERVAL_MS:600,CHART_MAX_POINTS:30,STARTING_RESOURCES:1e4,MAIL_TOTAL:5,MAIL_SYNC_SECONDS:10,AUTO_MAIL_CHECK_DELAY_MS:100,UPGRADE_SELECT_ALL_COST:750,UPGRADE_AUTO_MAIL_COST:1e3,UPGRADE_INSTANT_SYNC_COST:2e3,ADD_STAKEHOLDER_COST:5e3,UPGRADE_COMM_OFFICER_BASE_COST:500,UPGRADE_STEP_COST:500,DOCUMENT_SIGNATURE_DELAY_MS:400,SCOPE_CREEP_INCREMENT:5,SCOPE_CREEP_MAX:100,MODULE_2_THRESHOLD:2e5,MODULE_3_THRESHOLD:2e6,WIN_THRESHOLD:1e13,MAIL_HANDLED_MULTIPLIER:10,TOTAL_EMAILS_MULTIPLIER:5};function c(o){const e=document.getElementById(o);if(!e)throw new Error(`Missing element: #${o}`);return e}function L(o=new Date){return`${o.getHours()}:${o.getMinutes().toString().padStart(2,"0")}`}function P(o,e,t){return Math.max(e,Math.min(t,o))}class U{constructor(){if(this.isDebugMode=!1,this.onDebugToggle=[],this.onResourceBoost=null,this.debugBtn=document.getElementById("debugBtn"),!this.debugBtn)throw new Error("Missing debug button #debugBtn");this.debugBtn.addEventListener("click",()=>this.toggleDebugMode()),this.updateButtonStyle()}toggleDebugMode(){this.isDebugMode=!this.isDebugMode,this.updateButtonStyle(),this.onDebugToggle.forEach(e=>e(this.isDebugMode)),this.isDebugMode&&this.onResourceBoost&&this.onResourceBoost(),console.log(`Debug mode: ${this.isDebugMode?"ON":"OFF"}`),this.isDebugMode&&console.log("💰 Debug resources granted!")}updateButtonStyle(){this.isDebugMode?(this.debugBtn.textContent="Debug: ON",this.debugBtn.style.backgroundColor="#4caf50",this.debugBtn.style.color="white",this.debugBtn.style.fontWeight="bold"):(this.debugBtn.textContent="Debug Mode",this.debugBtn.style.backgroundColor="",this.debugBtn.style.color="",this.debugBtn.style.fontWeight="")}isEnabled(){return this.isDebugMode}onToggle(e){this.onDebugToggle.push(e)}onBoostResources(e){this.onResourceBoost=e}unlockModule(e){const t=document.getElementById(e);t&&(t.style.display="",console.log(`[DEBUG] Unlocked module: ${e}`))}setOverhead(e){console.log(`[DEBUG] Setting overhead to: ${e}`)}}class x{constructor(e,t=i.COUNTER_BASE_STEP,s=i.COUNTER_FLUCTUATION_PCT,n=i.COUNTER_TICK_MS){this.container=e,this.step=t,this.fluctuationPct=s,this.tickMs=n,this.value=0,this.intervalId=null,this.scoreEl=document.createElement("p"),this.scoreEl.textContent="0",this.container.appendChild(this.scoreEl),this.start()}increment(){const e=this.fluctuationPct,t=1+(Math.random()*2*e-e);this.value+=this.step*t,this.scoreEl.textContent=Math.round(this.value).toString()}start(){this.intervalId===null&&(this.intervalId=window.setInterval(()=>this.increment(),this.tickMs))}getValue(){return this.value}updateStep(e){this.step=e}}class k{constructor(e){this.lastTotal=0,this.chart=new Chart(e,{type:"line",data:{labels:[],datasets:[{label:"Delta per interval",data:[],borderColor:"blue",fill:!1}]},options:{animation:!1,responsive:!0,scales:{x:{title:{display:!0,text:"Time (hh:mm)"}},y:{title:{display:!0,text:"Delta"}}}}})}updateDelta(e){const t=e-this.lastTotal;this.lastTotal=e;const s=this.chart.data.labels,n=this.chart.data.datasets[0].data;s.push(L()),n.push(t),s.length>i.CHART_MAX_POINTS&&(s.shift(),n.shift()),this.chart.update()}getLastTotal(){return this.lastTotal}setLastTotal(e){this.lastTotal=e}}class I{constructor(e,t=!0){this.moduleId=e,this.isUnlocked=t}unlock(){if(this.isUnlocked)return;this.isUnlocked=!0;const e=document.getElementById(this.moduleId);e&&(e.classList.remove("locked"),console.log(`Module unlocked: ${this.moduleId}`))}getIsUnlocked(){return this.isUnlocked}}const w=[{subject:"RE: Synergy Update - Q2 Planning",sender:"Alice Smith"},{subject:"Action Items for Next Sprint",sender:"Bob Johnson"},{subject:"RE: Leverage Insights from Last Meeting",sender:"Carol Lee"},{subject:"Quick Sync - Project Status Update",sender:"David Kim"},{subject:"Value Add Opportunities for Team Growth",sender:"Emma Brown"},{subject:"Strategic Alignment for Cross-Functional Initiatives",sender:"Frank Turner"},{subject:"Touch Base: Driving Operational Excellence",sender:"Grace Miller"},{subject:"RE: Optimize Workflow for Enhanced Productivity",sender:"Henry Clark"},{subject:"FYI: Streamlining Stakeholder Engagement",sender:"Ivy Wilson"},{subject:"Next Steps: Empowering Agile Transformation",sender:"Jack Davis"}];class v extends I{constructor(){super("mailbox",!0),this.mailHandled=0,this.mailSyncing=!1,this.selectAllPurchased=!1,this.autoMailPurchased=!1,this.instantSyncPurchased=!1,this.autoMailRunning=!1,this.onResourceChange=null,this.mailboxContainer=c("mailboxContainer"),this.mailSelectAllActionBtn=c("mailSelectAllActionBtn"),this.mailSelectBtn=c("mailSelectBtn"),this.mailReplyBtn=c("mailReplyBtn"),this.mailSyncBtn=c("mailSyncBtn")}init(){this.renderMailbox(),this.updateMailUI(),this.mailSelectAllActionBtn.addEventListener("click",()=>this.handleSelectAllAction()),this.mailReplyBtn.addEventListener("click",()=>this.handleReplyAll())}update(e){}getMetrics(){return{name:"Mailbox",primaryValue:this.mailHandled*i.MAIL_HANDLED_MULTIPLIER,label:`Mails handled: ${this.mailHandled}`}}getMailCheckboxes(){return this.mailboxContainer.querySelectorAll(".mail-checkbox")}updateMailUI(){const e=this.getMailCheckboxes(),t=Array.from(e).filter(n=>n.checked).length,s=i.MAIL_TOTAL-t;this.mailSyncing?(this.mailSelectAllActionBtn.style.display="none",this.mailSelectBtn.style.display="none",this.mailReplyBtn.style.display="none",this.mailSyncBtn.style.display="block"):s===0?(this.mailSelectAllActionBtn.style.display="none",this.mailSelectBtn.style.display="none",this.mailReplyBtn.style.display="block",this.mailSyncBtn.style.display="none"):(this.selectAllPurchased?(this.mailSelectAllActionBtn.style.display="block",this.mailSelectBtn.style.display="none"):(this.mailSelectBtn.textContent=`Select ${s}...`,this.mailSelectBtn.disabled=!0,this.mailSelectBtn.style.display="block",this.mailSelectAllActionBtn.style.display="none"),this.mailReplyBtn.style.display="none",this.mailSyncBtn.style.display="none")}handleMailCheckboxChange(){this.updateMailUI()}handleSelectAllAction(){this.getMailCheckboxes().forEach(t=>t.checked=!0),this.updateMailUI()}handleReplyAll(){if(this.mailHandled+=1,this.instantSyncPurchased){this.resetMailbox();return}this.mailSyncing=!0,this.mailboxContainer.querySelectorAll(".mail-item").forEach(n=>n.style.display="none");let t=i.MAIL_SYNC_SECONDS;this.mailSyncBtn.textContent=`Outlook synchronizing. ${t}...`,this.mailSyncBtn.style.display="block",this.mailReplyBtn.style.display="none",this.mailSelectBtn.style.display="none";const s=setInterval(()=>{t--,this.mailSyncBtn.textContent=`Outlook synchronizing. ${t}...`,t<=0&&(clearInterval(s),this.resetMailbox())},1e3)}resetMailbox(){this.mailSyncing=!1,this.renderMailbox(),this.updateMailUI(),this.autoMailPurchased&&!this.autoMailRunning&&setTimeout(()=>this.autoCheckMails(),500)}async autoCheckMails(){if(this.mailSyncing||this.autoMailRunning)return;this.autoMailRunning=!0;const e=this.getMailCheckboxes();if(this.selectAllPurchased)await new Promise(t=>setTimeout(t,i.AUTO_MAIL_CHECK_DELAY_MS)),e.forEach(t=>t.checked=!0),this.updateMailUI();else for(let t=0;t<e.length;t++)await new Promise(s=>setTimeout(s,i.AUTO_MAIL_CHECK_DELAY_MS)),e[t].checked=!0,this.updateMailUI();await new Promise(t=>setTimeout(t,i.AUTO_MAIL_CHECK_DELAY_MS)),this.autoMailRunning=!1,this.handleReplyAll()}getRandomMails(e){return[...w].sort(()=>Math.random()-.5).slice(0,e)}renderMailbox(){this.mailboxContainer.innerHTML="",this.getRandomMails(i.MAIL_TOTAL).forEach(t=>{const s=document.createElement("div");s.className="mail-item";const n=document.createElement("label"),l=document.createElement("input");l.type="checkbox",l.className="mail-checkbox",l.addEventListener("change",()=>this.handleMailCheckboxChange());const d=document.createElement("span");d.className="mail-subject",d.textContent=t.subject;const S=document.createElement("span");S.className="mail-person",S.textContent=t.sender,n.appendChild(l),n.appendChild(d),n.appendChild(S),s.appendChild(n),this.mailboxContainer.appendChild(s)})}purchaseSelectAll(e){return e>=i.UPGRADE_SELECT_ALL_COST&&!this.selectAllPurchased?(this.selectAllPurchased=!0,this.onResourceChange&&this.onResourceChange(-750),this.updateMailUI(),!0):!1}purchaseAutoMail(e){return e>=i.UPGRADE_AUTO_MAIL_COST&&!this.autoMailPurchased?(this.autoMailPurchased=!0,this.onResourceChange&&this.onResourceChange(-1e3),!this.mailSyncing&&!this.autoMailRunning&&this.autoCheckMails(),!0):!1}purchaseInstantSync(e){return e>=i.UPGRADE_INSTANT_SYNC_COST&&!this.instantSyncPurchased?(this.instantSyncPurchased=!0,this.onResourceChange&&this.onResourceChange(-2e3),!0):!1}getMailHandled(){return this.mailHandled}isSelectAllPurchased(){return this.selectAllPurchased}isAutoMailPurchased(){return this.autoMailPurchased}isInstantSyncPurchased(){return this.instantSyncPurchased}setOnResourceChange(e){this.onResourceChange=e}}const N=["CEO","CFO","CTO","Legal","HR","Marketing","Sales","External Auditor","Board Member","Compliance Officer","Regional Manager","Department Head","Project Lead"];class H extends I{constructor(){super("overheadManager",!1),this.currentDocument=null,this.documentInProgress=!1,this.documentsCompleted=0,this.permanentStakeholders=["CEO","CFO","Legal"],this.commOfficerCount=0,this.documentSpeedMultiplier=1,this.hoursWastedTotal=0,this.onResourceChange=null,this.documentTitle=c("documentTitle"),this.signatureProgress=c("signatureProgress"),this.documentInfo=c("documentInfo"),this.addStakeholderBtn=c("addStakeholderBtn"),this.scopeCreepValue=c("scopeCreepValue"),this.scopeCreepBar=c("scopeCreepBar"),this.hoursWasted=c("hoursWasted")}init(){this.addStakeholderBtn.addEventListener("click",()=>this.addStakeholder()),this.currentDocument=this.createNewDocument(),this.documentInProgress=!0,this.updateDocumentUI(),this.processDocument()}update(e){}getMetrics(){return{name:"Corporation",primaryValue:this.hoursWastedTotal,label:`Hours wasted: ${this.hoursWastedTotal}`}}createNewDocument(){return{title:"Best Practices Framework for Best Practices",version:"v1.2.3",signatories:[...this.permanentStakeholders],currentSignatureIndex:0,totalRevisions:0,scopeCreep:0}}updateDocumentUI(){if(!this.currentDocument)return;const e=this.currentDocument;this.documentTitle.textContent=`${e.title} ${e.version}`,this.signatureProgress.innerHTML=e.signatories.map((t,s)=>{const n=s<e.currentSignatureIndex,l=s===e.currentSignatureIndex;return`<span style="${n?"color: green;":l?"color: orange;":"color: gray;"}">${n?"●":"○"} ${t}</span>`}).join(" → "),this.documentInfo.textContent=`Signatures: ${e.currentSignatureIndex}/${e.signatories.length} | Revisions: ${e.totalRevisions}`,this.scopeCreepValue.textContent=Math.floor(e.scopeCreep).toString(),this.scopeCreepBar.style.width=`${e.scopeCreep}%`}async processDocument(){if(!this.currentDocument||!this.documentInProgress)return;const e=this.currentDocument,t=i.DOCUMENT_SIGNATURE_DELAY_MS/this.documentSpeedMultiplier;for(;e.currentSignatureIndex<e.signatories.length;)await new Promise(n=>setTimeout(n,t)),e.currentSignatureIndex++,this.updateDocumentUI();e.scopeCreep=Math.min(e.scopeCreep+i.SCOPE_CREEP_INCREMENT,i.SCOPE_CREEP_MAX),e.totalRevisions++,e.currentSignatureIndex=0;const s=e.version.match(/v(\d+)\.(\d+)\.(\d+)/);if(s){const n=parseInt(s[3])+1;e.version=`v${s[1]}.${s[2]}.${n}`}if(this.updateDocumentUI(),e.scopeCreep>=i.SCOPE_CREEP_MAX){const n=e.signatories.length*40;this.hoursWasted.textContent=`⚠️ ${n} hours wasted! ⚠️`,this.hoursWasted.style.display="block",this.hoursWasted.style.animation="blink 1s infinite",await new Promise(l=>setTimeout(l,2e3)),this.onResourceChange&&this.onResourceChange(1e3),this.documentsCompleted++,this.hoursWastedTotal+=n,this.hoursWasted.style.display="none",this.currentDocument=this.createNewDocument(),this.documentInProgress=!0,this.updateDocumentUI(),this.processDocument()}else this.processDocument()}addStakeholder(){if(!this.currentDocument||!this.documentInProgress)return;const e=this.currentDocument,t=N.filter(s=>!this.permanentStakeholders.includes(s));if(t.length>0){const s=t[Math.floor(Math.random()*t.length)];this.permanentStakeholders.push(s),e.signatories.push(s),e.scopeCreep=Math.min(e.scopeCreep+10,i.SCOPE_CREEP_MAX),this.onResourceChange&&this.onResourceChange(-5e3),this.updateDocumentUI()}}purchaseCommOfficer(e){const t=i.UPGRADE_COMM_OFFICER_BASE_COST*Math.pow(2,this.commOfficerCount);return e>=t?(this.commOfficerCount++,this.documentSpeedMultiplier*=2,this.onResourceChange&&this.onResourceChange(-t),!0):!1}canPurchaseStakeholder(e){return e>=i.ADD_STAKEHOLDER_COST}getCommOfficerCost(){return i.UPGRADE_COMM_OFFICER_BASE_COST*Math.pow(2,this.commOfficerCount)}getHoursWastedTotal(){return this.hoursWastedTotal}getCommOfficerCount(){return this.commOfficerCount}getDocumentSpeedMultiplier(){return this.documentSpeedMultiplier}setOnResourceChange(e){this.onResourceChange=e}}class $ extends I{constructor(){if(super("world",!1),this.isActive=!1,this.mailsPerSecond=0,this.avgContactsPerPerson=1,this.totalEmailsSent=0,this.animationFrame=null,this.dots=[],this.paths=[],this.lastUpdateTime=0,this.mailsEl=document.getElementById("worldMails"),this.contactsEl=document.getElementById("worldContacts"),this.totalEl=document.getElementById("worldTotal"),this.treeEl=document.getElementById("worldTree"),this.startBtn=document.getElementById("worldBtn"),this.controlsEl=document.getElementById("worldControls"),this.addMailBtn=document.getElementById("worldAddMail"),this.addContactBtn=document.getElementById("worldAddContact"),!this.mailsEl||!this.contactsEl||!this.totalEl||!this.treeEl||!this.startBtn||!this.controlsEl)throw new Error("Missing world module elements")}init(){this.startBtn.addEventListener("click",()=>this.startModule()),this.addMailBtn.addEventListener("click",()=>this.addMail()),this.addContactBtn.addEventListener("click",()=>this.addContact()),this.updateDisplay()}update(e){}getMetrics(){return{name:"World",primaryValue:Math.floor(this.totalEmailsSent*i.TOTAL_EMAILS_MULTIPLIER),label:`Total emails sent: ${Math.floor(this.totalEmailsSent).toLocaleString()}`}}startModule(){this.isActive||(this.isActive=!0,this.startBtn.style.display="none",this.controlsEl.style.display="block",this.animate())}addMail(){this.mailsPerSecond++,this.updateDisplay()}addContact(){this.avgContactsPerPerson++,this.updateDisplay()}updateDisplay(){this.mailsEl.textContent=this.mailsPerSecond.toString(),this.contactsEl.textContent=this.avgContactsPerPerson.toString(),this.totalEl.textContent=Math.floor(this.totalEmailsSent).toLocaleString(),this.mailsEl.style.animation="none",this.contactsEl.style.animation="none",this.totalEl.style.animation="none",setTimeout(()=>{this.mailsEl.style.animation="pulse 0.3s ease",this.contactsEl.style.animation="pulse 0.3s ease",this.totalEl.style.animation="pulse 0.3s ease"},10),this.renderTree()}renderTree(){const e=this.treeEl.offsetWidth||400,t=250;let s=this.treeEl.querySelector("svg");s||(s=document.createElementNS("http://www.w3.org/2000/svg","svg"),s.style.width="100%",s.style.height="250px",s.style.display="block",this.treeEl.appendChild(s)),s.setAttribute("viewBox",`0 0 ${e} ${t}`),s.setAttribute("preserveAspectRatio","xMidYMid meet");const n=Array.from(s.querySelectorAll(".mail-dot"));s.innerHTML="",n.forEach(g=>s.appendChild(g)),this.paths=[];const l=e/2,d=30,S=Math.max(this.avgContactsPerPerson,1);this.drawBranch(s,l,d,0,S,e,t)}drawBranch(e,t,s,n,l,d,S){const g=document.createElementNS("http://www.w3.org/2000/svg","circle");if(g.setAttribute("cx",t.toString()),g.setAttribute("cy",s.toString()),g.setAttribute("r",n===0?"6":"4"),g.setAttribute("fill",`hsl(${n*80}, 70%, 60%)`),g.setAttribute("data-depth",n.toString()),e.appendChild(g),n>=2)return;const m=s+100,u=n===0?10:3,h=Math.min(l,u),A=Math.max(0,l-u),T=Math.min(d/(h+1),80);for(let p=0;p<h;p++){const R=(p-(h-1)/2)*T,C=t+R,B=Math.max(20,Math.min(d-20,C)),y=document.createElementNS("http://www.w3.org/2000/svg","line");y.setAttribute("x1",t.toString()),y.setAttribute("y1",s.toString()),y.setAttribute("x2",B.toString()),y.setAttribute("y2",m.toString()),y.setAttribute("stroke","#4ecdc4"),y.setAttribute("stroke-opacity","0.6"),y.setAttribute("stroke-width","1"),e.appendChild(y),this.paths.push({x1:t,y1:s,x2:B,y2:m,depth:n}),this.drawBranch(e,B,m,n+1,l,d,S)}if(A>0){const p=t+(h-1)/2*T,R=Math.min(p+30,d-40),C=document.createElementNS("http://www.w3.org/2000/svg","text");C.setAttribute("x",R.toString()),C.setAttribute("y",(m+4).toString()),C.setAttribute("text-anchor","middle"),C.setAttribute("fill","#ff9800"),C.setAttribute("font-size","11"),C.setAttribute("font-weight","bold"),C.textContent=`+${A}`,e.appendChild(C)}}animate(){if(!this.isActive)return;const e=performance.now(),t=this.lastUpdateTime?(e-this.lastUpdateTime)/1e3:0;this.lastUpdateTime=e;const s=Math.max(this.avgContactsPerPerson,1),n=s+s*s;t>0&&t<1&&(this.totalEmailsSent+=this.mailsPerSecond*n*t,this.totalEl.textContent=Math.floor(this.totalEmailsSent).toLocaleString());const l=.008,S=Math.min(.1+this.mailsPerSecond*.1,5)*.015;this.paths.length>0&&Math.random()<S&&this.paths.map((u,h)=>({path:u,idx:h})).filter(({path:u})=>u.depth===0).forEach(({idx:u})=>{this.dots.push({progress:0,pathIndex:u,hasSpawnedChildren:!1})});const g=[];this.dots=this.dots.filter(m=>{if(m.progress+=l,m.progress>=.5&&!m.hasSpawnedChildren){m.hasSpawnedChildren=!0;const u=this.paths[m.pathIndex];u&&this.paths.forEach((h,A)=>{const T=Math.abs(h.x1-u.x2),p=Math.abs(h.y1-u.y2);T<5&&p<5&&A!==m.pathIndex&&g.push({progress:0,pathIndex:A,hasSpawnedChildren:!1})})}return m.progress<1}),this.dots.push(...g);const _=this.treeEl.querySelector("svg");_&&(_.querySelectorAll(".mail-dot").forEach(u=>u.remove()),this.dots.forEach(u=>{if(u.pathIndex<this.paths.length){const h=this.paths[u.pathIndex],A=h.x1+(h.x2-h.x1)*u.progress,T=h.y1+(h.y2-h.y1)*u.progress,p=document.createElementNS("http://www.w3.org/2000/svg","circle");p.classList.add("mail-dot"),p.setAttribute("cx",A.toString()),p.setAttribute("cy",T.toString()),p.setAttribute("r","3"),p.setAttribute("fill","#ff6b6b"),_.appendChild(p)}})),this.animationFrame=requestAnimationFrame(()=>this.animate())}isRunning(){return this.isActive}getTotalEmailsSent(){return this.totalEmailsSent}}class W{constructor(){this.state={counters:[],outputValue:0,resources:i.STARTING_RESOURCES,lastChartTotal:0,stepMultiplier:1,mailHandled:0,mailSyncing:!1,autoMailPurchased:!1,autoMailRunning:!1,instantSyncPurchased:!1,selectAllPurchased:!1,currentDocument:null,documentInProgress:!1,documentsCompleted:0,permanentStakeholders:["CEO","CFO","Legal"],commOfficerCount:0,documentSpeedMultiplier:1,hoursWastedTotal:0,module2Unlocked:!1,module3Unlocked:!1,winModuleShown:!1}}getResources(){return this.state.resources}getOutputValue(){return this.state.outputValue}getStepMultiplier(){return this.state.stepMultiplier}getCounters(){return this.state.counters}isModule2Unlocked(){return this.state.module2Unlocked}isModule3Unlocked(){return this.state.module3Unlocked}isWinModuleShown(){return this.state.winModuleShown}setOutputValue(e){this.state.outputValue=e}addResources(e){this.state.resources+=e}spendResources(e){return this.state.resources>=e?(this.state.resources-=e,!0):!1}setModule2Unlocked(e){this.state.module2Unlocked=e}setModule3Unlocked(e){this.state.module3Unlocked=e}setWinModuleShown(e){this.state.winModuleShown=e}addCounter(e){this.state.counters.push(e)}doubleStepMultiplier(){this.state.stepMultiplier*=2}}const r=new W,a={totalEl:c("total"),buyBtn:c("addBtn"),countersContainer:c("counters"),progressBar:c("progressBar"),progressText:c("progressText"),upgradeStepBtn:c("upgradeStepBtn"),upgradeSelectAllBtn:c("upgradeSelectAllBtn"),upgradeAutoMailBtn:c("upgradeAutoMailBtn"),upgradeInstantSyncBtn:c("upgradeInstantSyncBtn"),upgradeCommOfficerBtn:c("upgradeCommOfficerBtn"),ctx:c("counterChart")},M=new v,E=new H,O=new $,G=new k(a.ctx),b=new U;function F(o){if(!r.isModule2Unlocked()&&o>=i.MODULE_2_THRESHOLD&&(r.setModule2Unlocked(!0),E.unlock()),!r.isModule3Unlocked()&&o>=i.MODULE_3_THRESHOLD&&(r.setModule3Unlocked(!0),O.unlock()),!r.isWinModuleShown()&&o>=i.WIN_THRESHOLD){r.setWinModuleShown(!0);const e=document.getElementById("module-win");e&&(e.classList.remove("locked"),console.log("You win!"))}}function V(o){let e=0,t="";if(o<i.MODULE_2_THRESHOLD)e=o/i.MODULE_2_THRESHOLD*100,t=`Level 1: ${Math.floor(o).toLocaleString()} / 200k`;else if(o<i.MODULE_3_THRESHOLD){const s=i.MODULE_3_THRESHOLD-i.MODULE_2_THRESHOLD;e=(o-i.MODULE_2_THRESHOLD)/s*100,t=`Level 2: ${Math.floor(o).toLocaleString()} / 2M`}else{const s=i.WIN_THRESHOLD-i.MODULE_3_THRESHOLD;e=(o-i.MODULE_3_THRESHOLD)/s*100,t=`Level 3: ${Math.floor(o).toLocaleString()} / 10T`}e=P(e,0,100),a.progressBar.style.width=e+"%",a.progressText.textContent=`${e.toFixed(2)}% - ${t}`}function Y(){const o=M.getMetrics(),e=E.getMetrics(),t=O.getMetrics(),s=r.getCounters().reduce((n,l)=>n+l.getValue(),0);return o.primaryValue+e.primaryValue+t.primaryValue+s}function f(){const o=Y();r.setOutputValue(o),a.totalEl.textContent=`Overhead: ${Math.floor(o)}h | Your budget: $${Math.floor(r.getResources())}`,V(o),F(o),a.buyBtn.textContent=`Buy Counter (${i.COUNTER_COST} resources)`,a.buyBtn.disabled=r.getResources()<i.COUNTER_COST,a.upgradeStepBtn.textContent=`Double Counter Speed (${i.UPGRADE_STEP_COST} resources) [x${r.getStepMultiplier()}]`,a.upgradeStepBtn.disabled=r.getResources()<i.UPGRADE_STEP_COST,M.isSelectAllPurchased()?(a.upgradeSelectAllBtn.textContent="Select All: Active",a.upgradeSelectAllBtn.disabled=!0):(a.upgradeSelectAllBtn.textContent=`Select All Tool (${i.UPGRADE_SELECT_ALL_COST} resources)`,a.upgradeSelectAllBtn.disabled=r.getResources()<i.UPGRADE_SELECT_ALL_COST),M.isAutoMailPurchased()?(a.upgradeAutoMailBtn.textContent="Auto-Mail: Active",a.upgradeAutoMailBtn.disabled=!0):(a.upgradeAutoMailBtn.textContent=`Auto-Mail System (${i.UPGRADE_AUTO_MAIL_COST} resources)`,a.upgradeAutoMailBtn.disabled=r.getResources()<i.UPGRADE_AUTO_MAIL_COST),M.isInstantSyncPurchased()?(a.upgradeInstantSyncBtn.textContent="Instant Sync: Active",a.upgradeInstantSyncBtn.disabled=!0):(a.upgradeInstantSyncBtn.textContent=`Instant Sync (${i.UPGRADE_INSTANT_SYNC_COST} resources)`,a.upgradeInstantSyncBtn.disabled=r.getResources()<i.UPGRADE_INSTANT_SYNC_COST);const e=E.getCommOfficerCost();return a.upgradeCommOfficerBtn.textContent=`Hire Comm Officer ($${e}) [${E.getCommOfficerCount()}x, ${E.getDocumentSpeedMultiplier()}x speed]`,a.upgradeCommOfficerBtn.disabled=r.getResources()<e,o}function j(){if(r.spendResources(i.COUNTER_COST)){const o=i.COUNTER_BASE_STEP*r.getStepMultiplier();r.addCounter(new x(a.countersContainer,o)),f()}else alert("Not enough resources!")}function X(){r.spendResources(i.UPGRADE_STEP_COST)?(r.doubleStepMultiplier(),r.getCounters().forEach(o=>{o.updateStep(i.COUNTER_BASE_STEP*r.getStepMultiplier())}),f()):alert("Not enough resources!")}function K(){M.purchaseSelectAll(r.getResources())?f():alert("Not enough resources!")}function q(){M.purchaseAutoMail(r.getResources())?f():alert("Not enough resources!")}function z(){M.purchaseInstantSync(r.getResources())?f():alert("Not enough resources!")}function J(){E.purchaseCommOfficer(r.getResources())?f():alert("Not enough resources!")}b.onBoostResources(()=>{r.addResources(9999999999999),f()});b.onToggle(o=>{const e=document.getElementById("counterModule");if(e&&(e.style.display=o?"block":"none"),o){console.log("Debug commands available:"),console.log("- Click Module 2 header to unlock Corporation"),console.log("- Click Module 3 header to unlock World");const t=document.querySelector("#overheadManager h4");t&&t.addEventListener("click",()=>{b.unlockModule("overheadManager"),r.setModule2Unlocked(!0),E.unlock()});const s=document.querySelector("#world h4");s&&s.addEventListener("click",()=>{b.unlockModule("world"),r.setModule3Unlocked(!0),O.unlock()})}});const D=document.getElementById("counterModule");D&&(D.style.display="none");a.buyBtn.addEventListener("click",j);a.upgradeStepBtn.addEventListener("click",X);a.upgradeSelectAllBtn.addEventListener("click",K);a.upgradeAutoMailBtn.addEventListener("click",q);a.upgradeInstantSyncBtn.addEventListener("click",z);a.upgradeCommOfficerBtn.addEventListener("click",J);M.setOnResourceChange(o=>r.addResources(o));E.setOnResourceChange(o=>r.addResources(o));function Q(){M.init(),E.init(),O.init(),setInterval(f,i.UI_UPDATE_MS),setInterval(()=>{const o=f();G.updateDelta(o)},i.CHART_INTERVAL_MS),console.log("Reply All - The Game started!"),console.log("Modules loaded: Mailbox, Corporation (locked), World (locked)")}Q();
